{
  "listener_key": "listener-{{ .service.serviceName}}",
  "zone_key": "{{ .Values.global.zone}}",
  "name": "{{ .service.serviceName}}",
  "ip": "0.0.0.0",
  "port": 10808,
  "protocol": "http_auto",
  "domain_keys": ["domain-{{ .service.serviceName}}"],
  "tracing_config": null,
  "active_http_filters": [{{- if and (ne .service.serviceName "jwt-security") (ne .service.serviceName "internal-jwt-security") }}"gm.jwtsecurity"{{- end}}],
  "http_filters": {
    "gm_jwtsecurity": {
      "apiKey": "{{ .Values.global.jwt_api_key }}",
      "endpoint": "https://localhost:10909/jwt",
      "jwtHeaderName": "userpolicy"{{- if .service.secret.enabled }},
      "useTls": true,
      "caPath": "{{ .service.secret.mount_point }}/ca.crt",
      "certPath": "{{ .service.secret.mount_point }}/server.crt",
      "keyPath": "{{ .service.secret.mount_point }}/server.key",
      "insecureSkipVerify": true{{- end }}
    }
  }
}
